# Document de Travail : Refonte de la Gestion RAG

> **Statut** : En cours de dÃ©finition
> **Branche** : `claude/rag-refactor-planning-3F9Bx`
> **Date de crÃ©ation** : 2025-12-29

---

## 1. Contexte et Objectifs

### 1.1 Ã‰tat actuel

Le systÃ¨me RAG actuel dispose de :
- Un modÃ¨le `Document` complet avec extraction, chunking et indexation
- Un service d'extraction multi-mÃ©thodes (pdftotext, OCR, parsers)
- 5 stratÃ©gies de chunking (sentence, paragraph, fixed_size, recursive, llm_assisted)
- Une intÃ©gration Qdrant pour le stockage vectoriel
- Un systÃ¨me de catÃ©gories dynamiques (AI-generated)

### 1.2 PÃ©rimÃ¨tre de la refonte

| Ã‰lÃ©ment | Action |
|---------|--------|
| Formulaire de crÃ©ation | **Ã€ refondre** |
| Onglets des documents RAG | **Ã€ remodeliser** |
| Pipelines de traitement | **Ã€ dÃ©finir clairement par type** |
| Options par type de document | **Ã€ exposer clairement** |
| Crawl web | **InchangÃ©** (fonctionne bien, on l'utilise) |

### 1.3 Objectifs

1. **Simplifier** l'expÃ©rience utilisateur lors de la crÃ©ation de documents
2. **Clarifier** les options disponibles selon le type de document
3. **Rendre explicites** les pipelines de traitement
4. **AmÃ©liorer** la visibilitÃ© sur le statut et les mÃ©tadonnÃ©es

---

## 2. Formulaire de CrÃ©ation

### 2.1 ProblÃ¨mes actuels

- Toutes les options affichÃ©es en mÃªme temps (surcharge cognitive)
- Pas d'adaptation dynamique selon le type de fichier uploadÃ©
- Extraction method "Auto" pas assez explicite sur ce qu'elle fait
- Pas de preview/validation avant traitement

### 2.2 Nouvelle approche proposÃ©e

#### Ã‰tape 1 : Upload et dÃ©tection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UPLOAD DE DOCUMENT                                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Glissez un fichier ici ou cliquez pour sÃ©lectionner â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  Types acceptÃ©s : PDF, DOCX, TXT, MD, Images (JPG,   â”‚   â”‚
â”‚  â”‚  PNG, TIFF, WEBP, GIF, BMP)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  Agent : [SÃ©lectionner un agent â–¼]                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ã‰tape 2 : Configuration adaptative (aprÃ¨s upload)

Le formulaire s'adapte selon le type de fichier dÃ©tectÃ© :

**Pour les PDF :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ DOCUMENT PDF DÃ‰TECTÃ‰                                    â”‚
â”‚  Fichier : mon_document.pdf (2.3 MB)                        â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ MÃ©thode d'extraction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â—‹ Automatique (recommandÃ©)                                 â”‚
â”‚    â†’ Teste pdftotext + parser PHP, sÃ©lectionne le meilleur â”‚
â”‚    â†’ Bascule en OCR si texte insuffisant                   â”‚
â”‚                                                             â”‚
â”‚  â—‹ Texte uniquement                                         â”‚
â”‚    â†’ Extraction directe du texte embarquÃ©                   â”‚
â”‚    â†’ Ã‰choue si le PDF est scannÃ©/image                     â”‚
â”‚                                                             â”‚
â”‚  â—‹ OCR forcÃ©                                                â”‚
â”‚    â†’ Convertit chaque page en image puis OCR               â”‚
â”‚    â†’ IdÃ©al pour PDF scannÃ©s ou de mauvaise qualitÃ©         â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ StratÃ©gie de dÃ©coupage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  [Voir section 2.3]                                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pour les Images :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¼ï¸ IMAGE DÃ‰TECTÃ‰E                                          â”‚
â”‚  Fichier : facture_scan.png (1.1 MB) - 2480x3508px         â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Extraction OCR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  Langues : [âœ“] FranÃ§ais  [âœ“] Anglais  [ ] Autres...        â”‚
â”‚                                                             â”‚
â”‚  Mode de segmentation :                                     â”‚
â”‚  â—‹ Automatique (dÃ©tection de mise en page)                 â”‚
â”‚  â—‹ Bloc de texte unique                                    â”‚
â”‚  â—‹ Ligne par ligne                                         â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ Conseil : Pour de meilleurs rÃ©sultats, utilisez des    â”‚
â”‚  images de 300 DPI minimum                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pour les Documents texte (TXT, MD) :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ DOCUMENT TEXTE DÃ‰TECTÃ‰                                  â”‚
â”‚  Fichier : notes.md (45 KB)                                 â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ AperÃ§u â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ # Titre du document                                  â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ PremiÃ¨re section de contenu...                       â”‚   â”‚
â”‚  â”‚ ...                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  Encodage dÃ©tectÃ© : UTF-8 âœ“                                â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ StratÃ©gie de dÃ©coupage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  [Voir section 2.3]                                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pour les Documents Office (DOCX) :**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ DOCUMENT WORD DÃ‰TECTÃ‰                                   â”‚
â”‚  Fichier : rapport.docx (234 KB)                            â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Extraction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  Contenu dÃ©tectÃ© :                                          â”‚
â”‚  â€¢ 15 pages                                                 â”‚
â”‚  â€¢ 3 images intÃ©grÃ©es                                       â”‚
â”‚  â€¢ 2 tableaux                                               â”‚
â”‚                                                             â”‚
â”‚  Options :                                                  â”‚
â”‚  [âœ“] Extraire le texte des paragraphes                     â”‚
â”‚  [ ] Inclure le contenu des tableaux (expÃ©rimental)        â”‚
â”‚  [ ] DÃ©crire les images (nÃ©cessite vision AI)              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 StratÃ©gies de dÃ©coupage (communes Ã  tous)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”€â”€ StratÃ©gie de dÃ©coupage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â—‹ Paragraphes (recommandÃ© pour texte structurÃ©)           â”‚
â”‚    DÃ©coupe sur les doubles sauts de ligne                   â”‚
â”‚                                                             â”‚
â”‚  â—‹ Phrases                                                  â”‚
â”‚    Une phrase par chunk (idÃ©al pour FAQ)                   â”‚
â”‚                                                             â”‚
â”‚  â—‹ Taille fixe                                              â”‚
â”‚    Chunks de [500] tokens avec [50] tokens de chevauchement â”‚
â”‚                                                             â”‚
â”‚  â—‹ RÃ©cursif intelligent                                     â”‚
â”‚    DÃ©coupage hiÃ©rarchique prÃ©servant la sÃ©mantique         â”‚
â”‚                                                             â”‚
â”‚  â—‹ AssistÃ© par LLM â­                                       â”‚
â”‚    Analyse sÃ©mantique avec rÃ©sumÃ©s et mots-clÃ©s auto       â”‚
â”‚    â”œâ”€ ModÃ¨le : [DÃ©faut agent / Ollama â–¼]                   â”‚
â”‚    â”œâ”€ FenÃªtre : [2000] tokens                              â”‚
â”‚    â””â”€ Chevauchement : [10] %                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 MÃ©tadonnÃ©es (section repliable)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–¼ MÃ©tadonnÃ©es (optionnel)                                 â”‚
â”‚                                                             â”‚
â”‚  Titre : [_______________________________]                  â”‚
â”‚          Si vide, utilise le nom du fichier                â”‚
â”‚                                                             â”‚
â”‚  Description : [____________________________]               â”‚
â”‚                [____________________________]               â”‚
â”‚                                                             â”‚
â”‚  URL source : [_______________________________]             â”‚
â”‚               RÃ©fÃ©rence vers le document original           â”‚
â”‚                                                             â”‚
â”‚  CatÃ©gorie : [Documentation â–¼]                              â”‚
â”‚              documentation | faq | product | support |      â”‚
â”‚              legal | other                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. RemodÃ©lisation des Onglets

### 3.1 Structure actuelle (4 onglets)

| Onglet | Contenu |
|--------|---------|
| Informations | Upload, mÃ©tadonnÃ©es, remplacement fichier |
| Extraction | Statut, texte extrait, erreurs |
| Indexation | Statut indexation, stratÃ©gie, donnÃ©es LLM brutes |
| Chunks | Liste des chunks avec gestion |

### 3.2 Nouvelle structure proposÃ©e (5 onglets)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ RÃ©sumÃ©  â”‚  ğŸ“„ Fichier  â”‚  âš™ï¸ Traitement  â”‚  ğŸ“¦ Chunks  â”‚  ğŸ” RAG  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Onglet 1 : RÃ©sumÃ© (nouveau)

Vue d'ensemble rapide du document :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ RÃ‰SUMÃ‰                                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ EXTRACTION       â”‚  â”‚ INDEXATION       â”‚                â”‚
â”‚  â”‚ âœ… ComplÃ©tÃ©      â”‚  â”‚ âœ… 47 chunks     â”‚                â”‚
â”‚  â”‚ 15 234 tokens    â”‚  â”‚ indexÃ©s          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Informations clÃ©s â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  Fichier    : rapport_annuel_2024.pdf                       â”‚
â”‚  Type       : PDF (3.2 MB)                                  â”‚
â”‚  Agent      : Assistant Commercial                          â”‚
â”‚  CrÃ©Ã© le    : 29/12/2025 14:32                             â”‚
â”‚  StratÃ©gie  : LLM AssistÃ© (mistral:7b)                     â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ CatÃ©gories dÃ©tectÃ©es â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  [Produits] x12  [Tarification] x8  [Garanties] x5         â”‚
â”‚  [Contact] x3    [Autres] x19                              â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Actions rapides â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  [ğŸ“¥ TÃ©lÃ©charger]  [ğŸ‘ï¸ Visualiser]  [ğŸ”„ Retraiter]        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Onglet 2 : Fichier

Gestion du fichier source :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ FICHIER                                                 â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Fichier actuel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“„ rapport_annuel_2024.pdf                          â”‚   â”‚
â”‚  â”‚  Type : application/pdf                              â”‚   â”‚
â”‚  â”‚  Taille : 3.2 MB                                     â”‚   â”‚
â”‚  â”‚  Hash : sha256:a1b2c3d4...                          â”‚   â”‚
â”‚  â”‚  UploadÃ© le : 29/12/2025 14:32                      â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  [ğŸ“¥ TÃ©lÃ©charger]  [ğŸ‘ï¸ Visualiser]                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Remplacer le fichier â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ Le remplacement dÃ©clenchera un retraitement complet   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Glissez un nouveau fichier ici                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ MÃ©tadonnÃ©es â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  Titre : [Rapport annuel 2024___________]                   â”‚
â”‚  Description : [____________________________]               â”‚
â”‚  URL source : [https://exemple.com/rapport]                 â”‚
â”‚  CatÃ©gorie : [Documentation â–¼]                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Onglet 3 : Traitement

Configuration et rÃ©sultats du pipeline :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ TRAITEMENT                                              â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Pipeline de traitement â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚EXTRACTIONâ”‚ â†’ â”‚DÃ‰COUPAGE â”‚ â†’ â”‚EMBEDDINGâ”‚ â†’ â”‚INDEXATIONâ”‚ â”‚
â”‚  â”‚   âœ…     â”‚    â”‚   âœ…     â”‚    â”‚   âœ…    â”‚    â”‚   âœ…     â”‚ â”‚
â”‚  â”‚ 2.3s    â”‚    â”‚ 45.2s   â”‚    â”‚ 12.1s  â”‚    â”‚  3.4s   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Configuration extraction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  MÃ©thode utilisÃ©e : Auto (pdftotext sÃ©lectionnÃ©)           â”‚
â”‚  QualitÃ© texte : 98.5% (2 ligatures corrigÃ©es)             â”‚
â”‚  Tokens extraits : 15 234                                   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Configuration dÃ©coupage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  StratÃ©gie : [LLM AssistÃ© â–¼]                               â”‚
â”‚  ModÃ¨le : mistral:7b                                        â”‚
â”‚  FenÃªtre : 2000 tokens | Chevauchement : 10%               â”‚
â”‚                                                             â”‚
â”‚  [ğŸ”„ Relancer le dÃ©coupage]                                â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Texte extrait â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â–¼ Afficher le texte brut (15 234 tokens)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [Texte extrait Ã©ditable...]                          â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ AprÃ¨s modification manuelle, relancez le dÃ©coupage     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Onglet 4 : Chunks

Gestion avancÃ©e des chunks :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ CHUNKS                                                  â”‚
â”‚                                                             â”‚
â”‚  47 chunks | 15 234 tokens total | Moy. 324 tokens/chunk   â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Actions groupÃ©es â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  [â˜ Tout sÃ©lectionner]  [Fusionner sÃ©lection]              â”‚
â”‚  [Fusionner par catÃ©gorie]  [RÃ©-indexer tout]              â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Filtres â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  CatÃ©gorie : [Toutes â–¼]  IndexÃ© : [Tous â–¼]                 â”‚
â”‚  Recherche : [_______________________]                      â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Liste des chunks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜ #1 | [Produits] | âœ… | 342 tokens                  â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ Notre gamme de produits comprend des solutions      â”‚   â”‚
â”‚  â”‚ adaptÃ©es Ã  chaque besoin...                         â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ ğŸ“ RÃ©sumÃ© : Description des gammes produits         â”‚   â”‚
â”‚  â”‚ ğŸ·ï¸ Mots-clÃ©s : produits, gamme, solutions           â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ [âœï¸ Ã‰diter] [ğŸ—‘ï¸ Supprimer]                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜ #2 | [Tarification] | âœ… | 287 tokens              â”‚   â”‚
â”‚  â”‚ ...                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Onglet 5 : RAG (nouveau)

Statistiques et test du RAG :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” RAG                                                     â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Statistiques d'utilisation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  RequÃªtes impliquant ce document : 127                      â”‚
â”‚  Chunks les plus rÃ©cupÃ©rÃ©s :                                â”‚
â”‚  â€¢ #12 (Tarification) - 34 fois                            â”‚
â”‚  â€¢ #5 (Produits) - 28 fois                                 â”‚
â”‚  â€¢ #23 (Garanties) - 19 fois                               â”‚
â”‚                                                             â”‚
â”‚  â”€â”€ Tester la rÃ©cupÃ©ration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                             â”‚
â”‚  Question test : [Quels sont vos produits ?_______]        â”‚
â”‚  [ğŸ” Tester]                                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ RÃ©sultats (3 chunks, score moyen : 0.87)             â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ 1. Chunk #5 (score: 0.92) - Produits                 â”‚   â”‚
â”‚  â”‚    "Notre gamme de produits comprend..."             â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ 2. Chunk #12 (score: 0.85) - Produits                â”‚   â”‚
â”‚  â”‚    "Les caractÃ©ristiques principales..."             â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ 3. Chunk #8 (score: 0.84) - Produits                 â”‚   â”‚
â”‚  â”‚    "Disponible en plusieurs formats..."             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Pipelines de Traitement par Type de Document

### 4.1 Vue d'ensemble des pipelines

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    UPLOAD       â”‚
                    â”‚ (DÃ©tection MIME)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   PDF   â”‚         â”‚  IMAGE  â”‚         â”‚  TEXTE  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                   â”‚                    â”‚
        â–¼                   â–¼                    â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
   â”‚EXTRACTIONâ”‚         â”‚   OCR   â”‚              â”‚
   â”‚ MULTI   â”‚         â”‚Tesseractâ”‚              â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â”‚
        â”‚                   â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   DÃ‰COUPAGE   â”‚
                    â”‚  (5 stratÃ©gies)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   EMBEDDING   â”‚
                    â”‚    (Ollama)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  INDEXATION   â”‚
                    â”‚   (Qdrant)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Pipeline PDF (le plus complexe)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PIPELINE PDF                                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. ANALYSE INITIALE                                  â”‚   â”‚
â”‚  â”‚    â€¢ DÃ©tection type PDF (natif/scannÃ©/mixte)        â”‚   â”‚
â”‚  â”‚    â€¢ Comptage pages                                  â”‚   â”‚
â”‚  â”‚    â€¢ DÃ©tection langue                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. EXTRACTION MULTI-MÃ‰THODES                        â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    MÃ©thode A : pdftotext                             â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ Mode 1 : -raw (prÃ©serve l'ordre)             â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ Mode 2 : -layout (prÃ©serve mise en page)     â”‚   â”‚
â”‚  â”‚    â””â”€â”€ Mode 3 : dÃ©faut                              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    MÃ©thode B : smalot/pdfparser                      â”‚   â”‚
â”‚  â”‚    â””â”€â”€ Parsing PHP natif                            â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    â†’ Comparaison qualitÃ© (chars invalides, mots      â”‚   â”‚
â”‚  â”‚      tronquÃ©s, ligatures)                           â”‚   â”‚
â”‚  â”‚    â†’ SÃ©lection meilleur rÃ©sultat                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. CONTRÃ”LE QUALITÃ‰                                  â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    Si taux mots tronquÃ©s > 5% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚                                           â”‚          â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
â”‚  â”‚    â”‚ 4. FALLBACK OCR                               â”‚â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Conversion PDF â†’ Images (300 DPI)        â”‚â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Tesseract OCR (fra + eng)                â”‚â”‚   â”‚
â”‚  â”‚    â”‚    â€¢ Reconstruction texte                     â”‚â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 5. NETTOYAGE                                         â”‚   â”‚
â”‚  â”‚    â€¢ Correction ligatures (ff, fi, fl, ffi, ffl)    â”‚   â”‚
â”‚  â”‚    â€¢ Normalisation espaces                          â”‚   â”‚
â”‚  â”‚    â€¢ Validation UTF-8                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                    [DÃ‰COUPAGE...]                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Pipeline Images

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PIPELINE IMAGE                                             â”‚
â”‚                                                             â”‚
â”‚  Types supportÃ©s : JPG, PNG, GIF, BMP, TIFF, WEBP          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. ANALYSE IMAGE                                     â”‚   â”‚
â”‚  â”‚    â€¢ Dimensions (largeur Ã— hauteur)                  â”‚   â”‚
â”‚  â”‚    â€¢ RÃ©solution estimÃ©e (DPI)                        â”‚   â”‚
â”‚  â”‚    â€¢ Mode couleur                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. PRÃ‰-TRAITEMENT (optionnel)                        â”‚   â”‚
â”‚  â”‚    â€¢ Conversion en niveaux de gris                   â”‚   â”‚
â”‚  â”‚    â€¢ AmÃ©lioration contraste                          â”‚   â”‚
â”‚  â”‚    â€¢ Redressement (deskew)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. OCR TESSERACT                                     â”‚   â”‚
â”‚  â”‚    â€¢ Langues : fra + eng                            â”‚   â”‚
â”‚  â”‚    â€¢ PSM : 3 (auto page segmentation)               â”‚   â”‚
â”‚  â”‚    â€¢ OEM : 3 (LSTM + Legacy)                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4. POST-TRAITEMENT                                   â”‚   â”‚
â”‚  â”‚    â€¢ Nettoyage caractÃ¨res parasites                 â”‚   â”‚
â”‚  â”‚    â€¢ Correction orthographique (optionnel)          â”‚   â”‚
â”‚  â”‚    â€¢ Validation UTF-8                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                    [DÃ‰COUPAGE...]                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4 Pipeline Texte (TXT, MD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PIPELINE TEXTE                                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. LECTURE FICHIER                                   â”‚   â”‚
â”‚  â”‚    â€¢ DÃ©tection encodage                              â”‚   â”‚
â”‚  â”‚    â€¢ Conversion UTF-8                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. NETTOYAGE                                         â”‚   â”‚
â”‚  â”‚    â€¢ Normalisation fins de ligne                    â”‚   â”‚
â”‚  â”‚    â€¢ Suppression caractÃ¨res de contrÃ´le             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                    [DÃ‰COUPAGE...]                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5 Pipeline Office (DOCX)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PIPELINE DOCX                                              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. DÃ‰COMPRESSION ZIP                                 â”‚   â”‚
â”‚  â”‚    â€¢ Extraction word/document.xml                    â”‚   â”‚
â”‚  â”‚    â€¢ Extraction ressources (images, styles)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. PARSING XML                                       â”‚   â”‚
â”‚  â”‚    â€¢ Extraction paragraphes <w:p>                   â”‚   â”‚
â”‚  â”‚    â€¢ Extraction texte <w:t>                         â”‚   â”‚
â”‚  â”‚    â€¢ PrÃ©servation structure                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. RECONSTRUCTION                                    â”‚   â”‚
â”‚  â”‚    â€¢ Assemblage texte avec sauts de ligne           â”‚   â”‚
â”‚  â”‚    â€¢ (Optionnel) Tableaux â†’ format texte            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚                    [DÃ‰COUPAGE...]                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.6 Pipeline de DÃ©coupage Commun

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PIPELINE DE DÃ‰COUPAGE                                      â”‚
â”‚                                                             â”‚
â”‚  Texte extrait                                              â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€â”€ StratÃ©gie : PARAGRAPHES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚       â”‚   â€¢ Split sur \n\n                              â”‚  â”‚
â”‚       â”‚   â€¢ Puis split sur \n si chunk trop grand       â”‚  â”‚
â”‚       â”‚                                                  â”‚  â”‚
â”‚       â”œâ”€â”€ StratÃ©gie : PHRASES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚       â”‚   â€¢ Split sur [.!?] suivi d'espace             â”‚  â”‚
â”‚       â”‚                                                  â”‚  â”‚
â”‚       â”œâ”€â”€ StratÃ©gie : TAILLE FIXE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚       â”‚   â€¢ Chunks de N tokens                          â”‚  â”‚
â”‚       â”‚   â€¢ Chevauchement de M tokens                   â”‚  â”‚
â”‚       â”‚                                                  â”‚  â”‚
â”‚       â”œâ”€â”€ StratÃ©gie : RÃ‰CURSIF â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚       â”‚   â€¢ Split hiÃ©rarchique :                        â”‚  â”‚
â”‚       â”‚     Paragraphes â†’ Lignes â†’ Phrases â†’ Mots      â”‚  â”‚
â”‚       â”‚   â€¢ PrÃ©serve unitÃ©s sÃ©mantiques                â”‚  â”‚
â”‚       â”‚                                                  â”‚  â”‚
â”‚       â””â”€â”€ StratÃ©gie : LLM ASSISTÃ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚           â€¢ CrÃ©ation fenÃªtres (2000 tokens, 10% overlap)â”‚  â”‚
â”‚           â€¢ Envoi Ã  Ollama pour analyse sÃ©mantique      â”‚  â”‚
â”‚           â€¢ Extraction : chunks + rÃ©sumÃ©s + mots-clÃ©s   â”‚  â”‚
â”‚           â€¢ Attribution catÃ©gories automatique          â”‚  â”‚
â”‚                                                          â”‚  â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CRÃ‰ATION DocumentChunk                               â”‚   â”‚
â”‚  â”‚ â€¢ chunk_index                                        â”‚   â”‚
â”‚  â”‚ â€¢ content                                            â”‚   â”‚
â”‚  â”‚ â€¢ token_count                                        â”‚   â”‚
â”‚  â”‚ â€¢ (LLM) summary, keywords, category                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ EMBEDDING                                            â”‚   â”‚
â”‚  â”‚ â€¢ GÃ©nÃ©ration vecteur 768 dimensions                 â”‚   â”‚
â”‚  â”‚ â€¢ (LLM) Inclut catÃ©gorie dans le texte embedÃ©       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ INDEXATION QDRANT                                    â”‚   â”‚
â”‚  â”‚ â€¢ Upsert par batch de 50                            â”‚   â”‚
â”‚  â”‚ â€¢ Point ID = UUID v5 (doc_uuid + chunk_index)       â”‚   â”‚
â”‚  â”‚ â€¢ Payload : content, metadata, category, keywords   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Options par Type de Document

### 5.1 Matrice des options disponibles

| Option | PDF | Image | TXT/MD | DOCX | HTML |
|--------|:---:|:-----:|:------:|:----:|:----:|
| **Extraction** |
| Auto (multi-mÃ©thodes) | âœ… | - | - | - | - |
| Texte seul | âœ… | - | âœ… | âœ… | âœ… |
| OCR forcÃ© | âœ… | âœ… | - | - | - |
| **Options OCR** |
| Langues | âœ… | âœ… | - | - | - |
| Mode segmentation | âœ… | âœ… | - | - | - |
| PrÃ©-traitement image | âœ… | âœ… | - | - | - |
| **Options DOCX** |
| Extraire tableaux | - | - | - | âœ… | - |
| DÃ©crire images | - | - | - | âœ… | - |
| **DÃ©coupage** |
| Paragraphes | âœ… | âœ… | âœ… | âœ… | âœ… |
| Phrases | âœ… | âœ… | âœ… | âœ… | âœ… |
| Taille fixe | âœ… | âœ… | âœ… | âœ… | âœ… |
| RÃ©cursif | âœ… | âœ… | âœ… | âœ… | âœ… |
| LLM assistÃ© | âœ… | âœ… | âœ… | âœ… | âœ… |

### 5.2 DÃ©tail des options par type

#### PDF - Options

| Option | Description | Valeur par dÃ©faut | Valeurs possibles |
|--------|-------------|-------------------|-------------------|
| `extraction_method` | MÃ©thode d'extraction | `auto` | `auto`, `text`, `ocr` |
| `ocr_languages` | Langues OCR | `fra+eng` | Codes Tesseract |
| `ocr_psm` | Mode segmentation | `3` | `0-13` |
| `quality_threshold` | Seuil qualitÃ© auto-OCR | `5%` | `1-20%` |
| `preserve_layout` | PrÃ©server mise en page | `false` | `true/false` |

#### Image - Options

| Option | Description | Valeur par dÃ©faut | Valeurs possibles |
|--------|-------------|-------------------|-------------------|
| `ocr_languages` | Langues OCR | `fra+eng` | Codes Tesseract |
| `ocr_psm` | Mode segmentation | `3` | `0-13` |
| `preprocessing` | PrÃ©-traitement | `none` | `none`, `grayscale`, `threshold`, `deskew` |
| `min_confidence` | Confiance minimale | `60%` | `0-100%` |

#### DOCX - Options

| Option | Description | Valeur par dÃ©faut | Valeurs possibles |
|--------|-------------|-------------------|-------------------|
| `extract_tables` | Extraire tableaux | `false` | `true/false` |
| `table_format` | Format tableaux | `markdown` | `markdown`, `csv`, `plain` |
| `extract_images` | Extraire images | `false` | `true/false` |
| `describe_images` | Description IA images | `false` | `true/false` |

#### DÃ©coupage LLM - Options

| Option | Description | Valeur par dÃ©faut | Valeurs possibles |
|--------|-------------|-------------------|-------------------|
| `model` | ModÃ¨le Ollama | Agent default | Tout modÃ¨le Ollama |
| `window_size` | Taille fenÃªtre | `2000` | `500-5000` tokens |
| `overlap_percent` | Chevauchement | `10` | `0-30` % |
| `temperature` | TempÃ©rature | `0.30` | `0.0-1.0` |
| `generate_summaries` | GÃ©nÃ©rer rÃ©sumÃ©s | `true` | `true/false` |
| `extract_keywords` | Extraire mots-clÃ©s | `true` | `true/false` |
| `auto_categorize` | CatÃ©goriser auto | `true` | `true/false` |

---

## 6. Modifications Techniques Requises

### 6.1 Modifications de la base de donnÃ©es

```php
// Nouvelle migration : options par type de document
Schema::table('documents', function (Blueprint $table) {
    // Options stockÃ©es en JSON
    $table->json('extraction_options')->nullable();
    $table->json('chunking_options')->nullable();

    // MÃ©triques supplÃ©mentaires
    $table->integer('page_count')->nullable();
    $table->float('extraction_quality_score')->nullable();
    $table->json('processing_timings')->nullable();
});
```

### 6.2 Nouveaux composants Filament

| Composant | Fichier | Description |
|-----------|---------|-------------|
| `DocumentTypeCard` | `Forms/Components/DocumentTypeCard.php` | Affichage adaptatif post-upload |
| `ExtractionOptions` | `Forms/Components/ExtractionOptions.php` | Options selon type |
| `ChunkingOptions` | `Forms/Components/ChunkingOptions.php` | Configuration dÃ©coupage |
| `PipelineStatus` | `Forms/Components/PipelineStatus.php` | Visualisation pipeline |
| `RagTestPanel` | `Forms/Components/RagTestPanel.php` | Test de rÃ©cupÃ©ration |

### 6.3 Modifications des services

| Service | Modification |
|---------|-------------|
| `DocumentExtractorService` | Accepter options d'extraction |
| `DocumentChunkerService` | Accepter options de dÃ©coupage |
| `ProcessDocumentJob` | Transmettre options aux services |

### 6.4 Nouvelles fonctionnalitÃ©s

| FonctionnalitÃ© | Description | PrioritÃ© |
|----------------|-------------|----------|
| DÃ©tection type fichier | Analyse MIME + extension + magic bytes | Haute |
| Preview texte avant traitement | AperÃ§u pour TXT/MD | Moyenne |
| Statistiques RAG par document | Tracking requÃªtes | Basse |
| Test rÃ©cupÃ©ration intÃ©grÃ© | Tester RAG inline | Haute |

---

## 7. Plan de Migration

### Phase 1 : Fondations (semaine 1)
- [ ] Migration base de donnÃ©es (options JSON)
- [ ] Refactoring services avec support options
- [ ] Tests unitaires

### Phase 2 : Interface crÃ©ation (semaine 2)
- [ ] Nouveau formulaire adaptatif
- [ ] Composants d'options par type
- [ ] Validation cÃ´tÃ© client

### Phase 3 : Onglets document (semaine 3)
- [ ] Restructuration 5 onglets
- [ ] Onglet RÃ©sumÃ©
- [ ] Onglet RAG avec test

### Phase 4 : Finitions (semaine 4)
- [ ] Tests E2E
- [ ] Documentation utilisateur
- [ ] Migration donnÃ©es existantes

---

## 8. Questions ouvertes

1. **Options OCR avancÃ©es** : Faut-il exposer tous les paramÃ¨tres PSM de Tesseract ou simplifier ?

2. **Tableaux DOCX** : Quel format par dÃ©faut pour l'extraction de tableaux (Markdown, CSV, texte plat) ?

3. **Statistiques RAG** : Faut-il tracker les requÃªtes par document pour les statistiques ?

4. **Preview extraction** : Doit-on montrer un aperÃ§u avant de lancer le traitement complet ?

5. **Options par dÃ©faut** : Les options doivent-elles Ãªtre hÃ©ritÃ©es de l'agent ou configurables document par document ?

---

## 9. RÃ©fÃ©rences

### Fichiers clÃ©s du systÃ¨me actuel

| Fichier | Description |
|---------|-------------|
| `app/Models/Document.php` | ModÃ¨le document |
| `app/Models/DocumentChunk.php` | ModÃ¨le chunk |
| `app/Services/DocumentExtractorService.php` | Service extraction |
| `app/Services/DocumentChunkerService.php` | Service dÃ©coupage |
| `app/Services/LlmChunkingService.php` | Service LLM chunking |
| `app/Filament/Resources/DocumentResource.php` | Resource Filament |
| `config/documents.php` | Configuration documents |

### Documentation existante

- `docs/10_documents_rag.md` - Documentation RAG actuelle
- `docs/14_llm_chunking.md` - Documentation LLM chunking
- `docs/03_ai_core_logic.md` - Logique IA core

---

> **Note** : Ce document est un document de travail Ã©volutif. Il sera mis Ã  jour au fur et Ã  mesure de l'avancement du projet.
